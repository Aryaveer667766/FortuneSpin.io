<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Fortune Realm</title>
  <link rel="stylesheet" href="style/user.css" />
  <link rel="stylesheet" href="style/spin.css" />
  <link rel="icon" href="assets/logos/logo.png" />
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600&family=Poppins&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(to right, #0f2027, #203a43, #2c5364);
      color: white;
      margin: 0;
      padding: 0;
    }
    header {
      text-align: center;
      padding: 20px;
      background: #111;
    }
    section {
      background: rgba(255,255,255,0.05);
      border-radius: 10px;
      padding: 20px;
      margin: 20px auto;
      max-width: 700px;
      box-shadow: 0 0 10px rgba(255,255,255,0.1);
    }
    button {
      background: #FFD700;
      border: none;
      color: #000;
      padding: 10px 20px;
      font-weight: bold;
      border-radius: 8px;
      cursor: pointer;
      margin-top: 10px;
    }
    input, textarea {
      width: 100%;
      padding: 10px;
      margin-top: 10px;
      border-radius: 6px;
      border: none;
    }
    #wheel-canvas {
      width: 300px;
      height: 300px;
      margin: 20px auto;
      display: block;
      border: 6px solid #fff;
      border-radius: 50%;
      box-shadow: 0 0 20px #FFD700;
    }
  </style>
</head>
<body>

  <!-- ğŸ”± Header -->
  <header>
    <img src="assets/logos/logo.png" height="60" />
    <h1>FortuneSpin Dashboard</h1>
    <p>Your UID: <span id="user-uid">Loading...</span></p>
  </header>

  <main>

    <!-- ğŸ”’ LOCKED -->
    <section id="locked-msg" style="display: none; text-align: center;">
      <p>ğŸ”’ Your Lucky Draw is Locked</p>
      <p>Send your UID on WhatsApp to unlock spins.</p>
      <img src="assets/qr/whatsapp-qr.png" width="180" />
      <br><br>
      <button onclick="openWhatsApp()">ğŸ“± Contact Admin via WhatsApp</button>
    </section>

    <!-- ğŸ¡ SPIN WHEEL -->
    <section id="spin-section" style="text-align: center;">
      <h2>ğŸ¯ Try Your Luck!</h2>
      <canvas id="wheel-canvas" width="300" height="300"></canvas>
      <br>
      <button id="spin-btn" onclick="spinWheel()">SPIN</button>
      <p id="spin-result">Tap SPIN to win!</p>
    </section>

    <!-- ğŸ’° BALANCE -->
    <section>
      <h3>ğŸ’° Your Balance</h3>
      <p style="font-size: 1.5em;">â‚¹<span id="user-balance">0</span></p>
    </section>

    <!-- ğŸ§‘â€ğŸ¤â€ğŸ§‘ REFERRAL -->
    <section>
      <h3>ğŸ‘« Invite & Earn â‚¹99</h3>
      <input type="text" id="referral-link" readonly />
      <button onclick="copyReferral()">Copy Referral Link</button>
    </section>

    <!-- ğŸ†• Referral Entry -->
    <section>
      <h3>ğŸ‘¥ Got a Referral?</h3>
      <input type="text" id="referral-input" placeholder="Enter UID of the person who invited you" />
      <button onclick="submitReferral()">Submit Referral</button>
    </section>

    <!-- ğŸ’¸ WITHDRAW -->
    <section>
      <h3>ğŸ’¸ Withdraw Winnings</h3>
      <p style="color: #ff5;">*Minimum 3 referrals required to request withdrawal</p>
      <input type="text" id="upi-id" placeholder="Enter your UPI ID" />
      <input type="number" id="withdraw-amount" placeholder="Enter amount (â‚¹)" />
      <button onclick="requestWithdrawal()">Request Withdrawal</button>
      <p id="withdraw-msg"></p>
    </section>

    <!-- ğŸ§¾ SUPPORT TICKET -->
    <section>
      <h3>ğŸ†˜ Support Ticket</h3>
      <input type="text" id="ticket-subject" placeholder="Subject" />
      <textarea id="ticket-message" placeholder="Describe your issue..." rows="3"></textarea>
      <button onclick="submitTicket()">Submit Ticket</button>
    </section>

    <!-- ğŸ“¢ NOTIFICATIONS -->
    <section>
      <h3>ğŸ“¢ Notifications</h3>
      <ul id="notifications-list"></ul>
    </section>

    <!-- ğŸ† WINNER FEED -->
    <section>
      <h3>ğŸ† Live Winners</h3>
      <marquee behavior="scroll" direction="left" scrollamount="5" style="color: #FFD700; font-weight:bold;" id="winner-feed">
        ğŸ‰ UID#X83KTR won â‚¹10,000 â€¢ ğŸ‰ UID#M22BDX won â‚¹5,000 â€¢ ğŸ‰ UID#A77ZZQ won â‚¹25,000
      </marquee>
    </section>

  </main>

  <!-- ğŸ‰ Confetti Canvas -->
  <canvas id="confetti-canvas"></canvas>

  <!-- ğŸ”Š Sound Effects -->
  <audio id="spin-sound" src="assets/spin.mp3"></audio>
  <audio id="win-sound" src="assets/win.mp3"></audio>
  <audio id="error-sound" src="assets/sounds/error.mp3"></audio>

  <!-- âœ… Scripts -->
  <script type="module" src="js/user.js"></script>
  <script src="js/spin.js"></script>

  <!-- ğŸ”§ Helper Scripts -->
  <script>
    function openWhatsApp() {
      const uid = document.getElementById("user-uid").textContent.trim();
      const message = `Hi, my UID is ${uid}`;
      const url = `https://wa.me/6283194274244?text=${encodeURIComponent(message)}`;
      window.open(url, "_blank");
    }

    function copyReferral() {
      const link = document.getElementById("referral-link");
      navigator.clipboard.writeText(link.value)
        .then(() => alert("Referral link copied!"))
        .catch(() => alert("Failed to copy link."));
    }
  </script>
</body>
</html>
